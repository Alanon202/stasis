.TH STASIS 5 "2025-09-27" "Stasis 0.1.3" "User Manuals"

.SH NAME
stasis \- modern idle manager for Wayland compositors

.SH SYNOPSIS
Stasis reads its configuration from a RUNE file (default: ~/.config/stasis/stasis.rune; copy the system default from /usr/local/share/doc/stasis/stasis.rune).
To start automatically, add exec stasis to your compositor's autostart (Niri, Hyprland, River).

.SH DESCRIPTION
Stasis monitors user idle time and triggers commands on idle, resume, suspend, or lock events.
It supports media monitoring, application-specific idle inhibition, and automatic restoration of display brightness and DPMS state.

Power-source-specific actions are supported:

.TP
on_ac / on_battery
Blocks containing actions that run when the power source changes.  
Each action within the block respects its configured timeout:
- `timeout = 0` executes immediately
- `timeout > 0` executes after the specified number of seconds
These blocks are useful for adjusting brightness, DPMS, or other system behavior depending on AC or battery power.

Subcommands allow control of the running daemon:
.IP
reload-config, pause, resume, trigger-idle, trigger-pre-suspend, stop

.SH CONFIGURATION
The configuration file is written in RUNE. Key sections:

.TP
idle
Commands and behavior for idle state.

.TP
resume_command
Command to run when activity resumes.

.TP
pre_suspend_command
Command to run before system suspend operations.

.TP
monitor_media
true/false to pause idle detection during media playback.

.TP
respect_idle_inhibitors
true/false to honor Wayland idle inhibitor protocols.

.TP
inhibit_apps
List of apps to ignore for idle. Supports literal names and Rust-style
regex patterns (handled by Stasis). Works on Niri, Hyprland, and River.

.TP
lock_screen
Section defining automatic screen locking.

.TP
timeout
Seconds before running the lock command.

.TP
command
Command to run (e.g., swaylock or hyprlock).

.TP
suspend
Section defining automatic suspend.

.TP
timeout
Seconds before suspend.

.TP
command
Command to run (e.g., systemctl suspend).

.TP
dpms
Optional section to turn off displays after a timeout.

.TP
timeout
Seconds before DPMS triggers.

.TP
command
Command to run (e.g., compositor-specific power-off monitors).

.TP
brightness
Optional section to adjust screen brightness after a timeout.

.TP
timeout
Seconds before brightness adjustment triggers.

.TP
command
Command to run (e.g., brightnessctl set 10%-).

.TP
on_ac / on_battery
Blocks containing idle actions that run when the power source changes.
Each action respects its configured timeout.

.TP
custom
Optional section to define additional commands with timeout and command.

.SH FILES
~/.config/stasis/stasis.rune
: Default configuration file.

.SH STARTING
.nf
Autostart Stasis in Niri (or other compositors):

# Add this line to your compositor's autostart config
exec stasis

.SH EXAMPLES


# Lock the screen automatically after 5 minutes of idle
lock_screen:
    timeout = 300
    command "hyprlock"
end

# Suspend automatically after 30 minutes of idle
suspend:
    timeout = 1800
    command "systemctl suspend"
end

# Set brightness or other actions on AC
on_ac:
    brightness:
        timeout = 0
        command "brightnessctl set 100%"
    end

    dpms:
        timeout = 10
        command "niri msg action power-off-monitors"
    end
end

# Set brightness or other actions on battery
on_battery:
    brightness:
        timeout = 0
        command "brightnessctl set 30%"
    end

    dpms:
        timeout = 10
        command "niri msg action power-off-monitors"
    end
end
.fi

.SH CLI SUBCOMMANDS
Control a running Stasis instance using:

.nf
stasis reload-config
stasis pause
stasis resume
stasis trigger-idle
stasis trigger-pre-suspend
stasis stop
.fi

.SH SEE ALSO
systemd(1), niri(5), hyprland(5), river(5)
